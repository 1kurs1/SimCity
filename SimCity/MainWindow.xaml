<Window x:Class="SimCity.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SimCity 3000"
        
        WindowState="Maximized"
        WindowStyle="None"

        MouseDown="Window_MouseDown"
        MouseUp="Window_MouseUp"
        MouseMove="Window_MouseMove"
        MouseWheel="Window_MouseWheel"
        KeyDown="Window_KeyDown">

    <Grid>
        <Canvas x:Name="MainCanvas" Background="Gray">
            <ItemsControl x:Name="MapItemsControl">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemContainerStyle>
                    <Style TargetType="ContentPresenter">
                        <Setter Property="Canvas.Left" Value="{Binding ScreenX}"/>
                        <Setter Property="Canvas.Top" Value="{Binding ScreenY}"/>
                        <Setter Property="Panel.ZIndex" Value="{Binding ZIndex}"/>
                    </Style>
                </ItemsControl.ItemContainerStyle>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Image Source="{Binding SpritePath}"
                               Width="{Binding SpriteWidth}"
                               Height="{Binding SpriteHeight}"
                               IsHitTestVisible="False"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <Image x:Name="BuildingGhost"
                   IsHitTestVisible="False"
                   Panel.ZIndex="1000"
                   Opacity="0.6"/>

            <Rectangle x:Name="HoverRect"
                       Width="32"
                       Height="16"
                       Stroke="Yellow"
                       StrokeThickness="2"
                       Visibility="Collapsed"
                       IsHitTestVisible="False"
                       Panel.ZIndex="1001"/>
        </Canvas>

        <StackPanel VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10" Background="White" Opacity="0.9">
            <!-- Переключатель режимов -->
            <GroupBox Header="Режим" Margin="5">
                <StackPanel>
                    <RadioButton x:Name="GameModeRadio" Content="Игра" GroupName="ViewMode" 
                               IsChecked="True" Checked="ViewModeRadio_Checked" Margin="2"/>
                    <RadioButton x:Name="ZoningModeRadio" Content="Зонирование" GroupName="ViewMode" 
                               Checked="ViewModeRadio_Checked" Margin="2"/>
                </StackPanel>
            </GroupBox>

            <Separator Margin="0,5"/>

            <!-- Инструменты строительства -->
            <GroupBox Header="Строительство" Margin="5">
                <StackPanel>
                    <RadioButton Content="Дорога (1)" GroupName="Tool" Checked="RoadToolRadio_Checked" Margin="2"/>

                    <GroupBox Header="Зоны (2)" Margin="5,2,5,2">
                        <StackPanel>
                            <RadioButton Content="Инструмент зона" GroupName="Tool" Checked="ZoneToolRadio_Checked" Margin="2"/>
                            <StackPanel Orientation="Horizontal" Margin="5,0">
                                <RadioButton x:Name="ResidentialZoneRadio" Content="Жилая" GroupName="ZoneType" 
                                           Checked="ZoneTypeRadio_Checked" Margin="2" IsChecked="True"/>
                                <RadioButton x:Name="CommercialZoneRadio" Content="Коммерческая" GroupName="ZoneType" 
                                           Checked="ZoneTypeRadio_Checked" Margin="2"/>
                                <RadioButton x:Name="IndustrialZoneRadio" Content="Промышленная" GroupName="ZoneType" 
                                           Checked="ZoneTypeRadio_Checked" Margin="2"/>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>

                    <RadioButton Content="Электростанция (3)" GroupName="Tool" Checked="PowerPlantToolRadio_Checked" Margin="2"/>
                </StackPanel>
            </GroupBox>

            <!-- Инструменты сноса -->
            <GroupBox Header="Снос" Margin="5">
                <StackPanel>
                    <RadioButton Content="Бульдозер (4)" GroupName="Tool" Checked="BulldozerToolRadio_Checked" Margin="2"/>
                    <RadioButton Content="Удалить зону" GroupName="Tool" Checked="ZoneRemoverToolRadio_Checked" Margin="2"/>
                    <RadioButton Content="Удалить дорогу (ПКМ)" GroupName="Tool" Checked="RoadRemoverToolRadio_Checked" Margin="2"/>
                </StackPanel>
            </GroupBox>

            <Separator Margin="0,5"/>

            <!-- Статистика -->
            <GroupBox Header="Статистика" Margin="5">
                <StackPanel>
                    <TextBlock x:Name="ResidentialCountText" Margin="2"/>
                    <TextBlock x:Name="CommercialCountText" Margin="2"/>
                    <TextBlock x:Name="IndustrialCountText" Margin="2"/>
                    <TextBlock x:Name="ReadyToUpgradeText" Margin="2"/>
                </StackPanel>
            </GroupBox>

            <Separator Margin="0,5"/>

            <Button x:Name="PauseButton" Content="Пауза (P)" Click="PauseButton_Click" Margin="5"/>
            <TextBlock x:Name="TimeTextBlock" Margin="5"/>
        </StackPanel>
    </Grid>
</Window>